# =============================================================================
# builtby.win tmux core profile
# Shared options only (no key remaps).
# =============================================================================

# General
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 50000
set -s escape-time 0
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"
set -s extended-keys on
set -as terminal-features 'xterm*:extkeys'
set -ga terminal-overrides ",xterm-256color:Usync"
set -g allow-passthrough on
set -ga terminal-features ",xterm-ghostty:hyperlinks"
set -g focus-events on
set -s set-clipboard external

# Pane appearance
set -g pane-border-style 'fg=brightblack'
set -g pane-active-border-style 'fg=blue'

# Status bar
set -g status-position bottom
set -g status-style 'bg=default fg=white'
set -g status-left '#[fg=blue,bold][#S]#[fg=brightblack]:#[fg=cyan]#I#[fg=brightblack]:#[fg=magenta]#P '
set -g status-left-length 30
set -g window-status-format ' #I:#W '
set -g window-status-current-format '#[fg=black,bg=blue,bold] #I:#W '
set -g window-status-separator ''
set -g status-right '#{?client_prefix,#[fg=yellow bold] LEADER ,}#[fg=brightblack] %H:%M:%S '

# Window naming
set -g automatic-rename on
set -g automatic-rename-format '#(if [ -x "$HOME/.config/tmux/window-name.sh" ]; then "$HOME/.config/tmux/window-name.sh" "#{pane_current_path}" "#{pane_current_command}"; else basename "#{pane_current_path}"; fi)'
set-hook -ug after-new-window[8921]
set-hook -ug after-select-window[8921]
set-hook -ug after-rename-window[8921]
set -gu @resurrect-hook-pre-restore-all
set -gu @resurrect-hook-post-restore-all

# Back2Vibing integration (macOS)
if-shell '[ -f "/Users/winstonzhao/Library/Application Support/back2vibing/tmux/back2vibing-tmux.conf" ]' \
  'source-file "/Users/winstonzhao/Library/Application Support/back2vibing/tmux/back2vibing-tmux.conf"'
